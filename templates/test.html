<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ring Toss</title>
        <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="static/css/app.css">
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.js"
    integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
    <title>Juego de Aros</title>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
    <link href='https://fonts.googleapis.com/css?family=Press+Start+2P' rel='stylesheet' type='text/css'>
</head>
<body>
 <!--SENSOR 1 -->

    <div class="col-sm">
      <div class="card">
        <div class="card-body">
          <div class="row">
            <div class="col-6">
              <div style="line-height:100%;">
                <a class="card-subtitle text-muted">RING</a>
                <br>
              </div>
            </div>
            <div class="col-6 mt-2">
              <div id="estadoInfrarojo1" class="mt-2 alert-success mb-0 text-center" style="line-height:200%;">
                TOSS</div>
              </div>
            </div>
          </div>
        </div>
      </div>

 <div>
     <div>

         PUNTAJE: <spa class="score-bottle">0</spa>
     </div>
     <br>
</div>

     <br>
     <br>
     <br>

<div class="container">

      <div class="row">
      </div>


      <div class="row">
      <div class="row">

          </div>
          <div class="col-sm-6 col-md-4 col-lg-4 offset-sm-3 offset-md-4 offset-lg-4">
            <div id="game" class="row"></div>
          </div>
        </div>
      </div>

     <div class="row">
      <div class="row">

          </div>
          <div class="col-sm-6 col-md-4 col-lg-4 offset-sm-3 offset-md-4 offset-lg-4">

            <div id="game" class="row"><div class="col-sm-4 col-md-4 col-lg-4 sensor" id="sensor-0">
                <img src="static/images/bottle.png" class="bottle">
                <img src="static/images/ring.png" class="ring"></div>


             <div class="col-sm-4 col-md-4 col-lg-4 sensor" id="sensor-1">
                 <img src="static/images/bottle.png" class="bottle">
                 <img src="static/images/ring.png" class="ring">
             </div>

             <div class="col-sm-4 col-md-4 col-lg-4 sensor" id="sensor-2">
                 <img src="static/images/bottle.png" class="bottle">
                 <img src="static/images/ring.png" class="ring">
             </div>

             <div class="col-sm-4 col-md-4 col-lg-4 sensor" id="sensor-3">
                 <img src="static/images/bottle.png" class="bottle">
                 <img src="static/images/ring.png" class="ring">
             </div>

             <div class="col-sm-4 col-md-4 col-lg-4 sensor" id="sensor-4">
                 <img src="static/images/bottle.png" class="bottle">
                 <img src="static/images/ring.png" class="ring">
             </div>

              <div class="col-sm-4 col-md-4 col-lg-4 sensor" id="sensor-5">
                  <img src="static/images/bottle.png" class="bottle">
                  <img src="static/images/ring.png" class="ring">
              </div>

              <div class="col-sm-4 col-md-4 col-lg-4 sensor" id="sensor-6">
                    <img src="static/images/bottle.png" class="bottle">
                    <img src="static/images/ring.png" class="ring">
               </div>

              <div class="col-sm-4 col-md-4 col-lg-4 sensor" id="sensor-7">
                    <img src="static/images/bottle.png" class="bottle">
                    <img src="static/images/ring.png" class="ring">
              </div>

              <div class="col-sm-4 col-md-4 col-lg-4 sensor" id="sensor-8">
                  <img src="static/images/bottle.png" class="bottle">
                  <img src="static/images/ring.png" class="ring">
              </div>
            </div>



          </div>
        </div>

<P>All work and no play makes Jack a dull boy.All work and no play makes Jack a dull boy. All work and no play makes Jack a dull boy.
   All work and no play makes Jack a dull boy. All work and no play makes Jack a dull boy. All work and no play makes Jack a dull boy.
   All work and no play makes Jack a dull boy.  All work and no play makes Jack a dull boy. All work and no play makes Jack a dull boy.
   All work and no play makes Jack a dull boy.All work and no play makes Jack a dull boy. All work and no play makes Jack a dull boy.
   All work and no play makes Jack a dull boy. All work and no play makes Jack a dull boy. All work and no play makes Jack a dull boy.
   All work and no play makes Jack a dull boy.  All work and no play makes Jack a dull boy. All work and no play makes Jack a dull boy.
   All work and no play makes Jack a dull boy.All work and no play makes Jack a dull boy. All work and no play makes Jack a dull boy.
   All work and no play makes Jack a dull boy. All work and no play makes Jack a dull boy. All work and no play makes Jack a dull boy.
   All work and no play makes Jack a dull boy.  All work and no play makes Jack a dull boy. All work and no play makes Jack a dull boy.
   All work and no play makes Jack a dull boy.All work and no play makes Jack a dull boy. All work and no play makes Jack a dull boy.
   All work and no play makes Jack a dull boy. All work and no play makes Jack a dull boy. All work and no play makes Jack a dull boy.
   All work and no play makes Jack a dull boy.All work and no play makes Jack a dull boy. All work and no play makes Jack a dull boy.
   All work and no play makes Jack a dull boy. All work and no play makes Jack a dull boy. All work and no play makes Jack a dull boy.
   All work and no play makes Jack a dull boy.  All work and no play makes Jack a dull boy. All work and no play makes Jack a dull boy.
   All work and no play makes Jack a dull boy.All work and no play makes Jack a dull boy. All work and no play makes Jack a dull boy.
   All work and no play makes Jack a dull boy. All work and no play makes Jack a dull boy. All work and no play makes Jack a dull boy.
   All work and no play makes Jack a dull boy.  All work and no play makes Jack a dull boy. All work and no play makes Jack a dull boy.
   All work and no play makes Jack a dull boy.All work and no play makes Jack a dull boy. All work and no play makes Jack a dull boy.
   All work and no play makes Jack a dull boy. All work and no play makes Jack a dull boy. All work and no play makes Jack a dull boy.
   All work and no play makes Jack a dull boy.  All work and no play makes Jack a dull boy. All work and no play makes Jack a dull boy.

</P>


      <script type="text/javascript" charset="utf-8">

          var audio = new Audio('static/Music/circus-song.mp3');
          audio.play();

          alert('Hey sup bruh?');



      scoreBottle = 1;
      function sensor(id) {

        bottle = document.createElement('img');
        $(bottle).attr('src', 'static/images/bottle.png');
        $(bottle).addClass('bottle');

        ring = document.createElement('img');
        $(ring).attr('src', 'static/images/ring.png');
        $(ring).addClass('ring');

        display = document.createElement('div');
        $(display).attr('class', 'col-sm-4 col-md-4 col-lg-4');
        $(display).addClass('sensor');
        $(display).attr('id',id);
        $(display).append(bottle);
        $(display).append(ring);

        return display
      }


      function point(points){
        $('.score-bottle').text(points)
      }

      function sensorOn(id) {

        scoreBottle++;
        point(scoreBottle*7);
        $(id).addClass('sensor-on')
      }

      function sensorOff(id) {
        scoreBottle--;
        point(scoreBottle*3);
        $(id).removeClass('sensor-on')
      }

      setTimeout(function(){
        sensorOn('#sensor-3')
      }, 1000);

      setTimeout(function(){
        sensorOff('#sensor-3')
      }, 3000)
    </script>

<script type="text/javascript" charset="utf-8">
        $('#infoTemperatura').hide();
        $('#textoApagando').hide();
        var typingTimer;
        var doneTypingInterval = 100;
        var flag = true;
        var msg_t = '';
        var socket = io.connect('http://' + document.domain + ':' + location.port);
        var dyn_functions = [];
        socket.on('message', function (msg) {
            var list = msg.split("-");
            console.log(list);
            var counter = 0;
            list.forEach(element => {
                if (counter == 6) {
                    if (element == "0") {
                        clearTimeout(typingTimer);
                        msg_t = 'all ok';
                        typingTimer = setTimeout(doneTyping, doneTypingInterval, element, msg_t);
                        flag = true;
                    } else {
                        clearTimeout(typingTimer);
                        if (flag == true) {
                            msg_t = 'enfriando!';
                            dyn_functions['receive_void_' + counter](element, msg_t);
                            flag = false;
                        }
                    }

                } else {
                    dyn_functions['receive_void_' + counter](element);
                }
                counter += 1;
            });
        });

        function doneTyping(element, msg_t) {
            dyn_functions['receive_void_6'](element, msg_t);
        }

        $("#sendButton").click(function () {
            var message = $("#myInput").val();
            socket.emit("message", message);
            $("#myInput").val("");
        });



        dyn_functions['receive_void_0'] = function (val) {
            if (val == "0") {
                setTimeout(function(){
                    sensorOff('#sensor-1')
                }, 1000)
            } else {

               setTimeout(function(){
                     sensorOn('#sensor-1')
               }, 1000)
            }
        };
        dyn_functions['receive_void_1'] = function (val) {
            if (val == "0") {
                setTimeout(function(){
                    sensorOff('#sensor-1')
                }, 1000)
            } else {

               setTimeout(function(){
                     sensorOn('#sensor-1')
               }, 1000)
            }

        };
        dyn_functions['receive_void_2'] = function (val) {
            if (val == "0") {
                setTimeout(function(){
                    sensorOff('#sensor-2')
                }, 1000)
            } else {

               setTimeout(function(){
                     sensorOn('#sensor-2')
               }, 1000)
            }
        };
        dyn_functions['receive_void_3'] = function (val) {
            if (val == "0") {
                setTimeout(function(){
                    sensorOff('#sensor-3')
                }, 1000)
            } else {

               setTimeout(function(){
                     sensorOn('#sensor-3')
               }, 1000)
            }

        };
        dyn_functions['receive_void_4'] = function (val) {
            if (val == "0") {
                setTimeout(function(){
                    sensorOff('#sensor-4')
                }, 1000)
            } else {

               setTimeout(function(){
                     sensorOn('#sensor-4')
               }, 1000)
            }
        };
        dyn_functions['receive_void_5'] = function (val) {
            if (val == "0") {
                setTimeout(function(){
                    sensorOff('#sensor-5')
                }, 1000)
            } else {

               setTimeout(function(){
                     sensorOn('#sensor-5')
               }, 1000)
            }
        };

        dyn_functions['receive_void_6'] = function (val, msg_t) {
            console.log(msg_t);
            if (val == "0") {
                setTimeout(function(){
                    sensorOff('#sensor-6')
                }, 1000)
            } else {

               setTimeout(function(){
                     sensorOn('#sensor-6')
               }, 1000)
            }

        };
        dyn_functions['receive_void_7'] = function (val) {
            if (val == "0") {
                setTimeout(function(){
                    sensorOff('#sensor-7')
                }, 1000)
            } else {

               setTimeout(function(){
                     sensorOn('#sensor-7')
               }, 1000)
            }


        };


        dyn_functions['receive_void_8'] = function (val) {
            if (val == "0") {
                setTimeout(function(){
                    sensorOff('#sensor-8')
                }, 1000)
            } else {

               setTimeout(function(){
                     sensorOn('#sensor-8')
               }, 1000)
            }
        };




        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }


    </script>

</body>
</html>